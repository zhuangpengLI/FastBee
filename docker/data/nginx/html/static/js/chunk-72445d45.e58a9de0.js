(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72445d45"],{"32d1":function(t,e,i){t.exports=i.p+"static/img/product.8957f07e.jpg"},"51cc":function(t,e,i){"use strict";i("749c")},"749c":function(t,e,i){},"98bc":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"6px"}},[a("el-card",{staticStyle:{"margin-bottom":"5px"}},[a("el-form",{ref:"queryForm",staticStyle:{"margin-bottom":"-20px"},attrs:{model:t.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-input",{attrs:{placeholder:"请输入产品名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.productName,callback:function(e){t.$set(t.queryParams,"productName",e)},expression:"queryParams.productName"}})],1),a("el-form-item",{attrs:{label:"分类名称",prop:"categoryName"}},[a("el-input",{attrs:{placeholder:"请输入产品分类名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.categoryName,callback:function(e){t.$set(t.queryParams,"categoryName",e)},expression:"queryParams.categoryName"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l(t.dict.type.iot_product_status,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:product:add"],expression:"['iot:product:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:function(e){return t.handleEditProduct(0)}}},[t._v("新增")])],1)],1)],1),a("el-card",{staticStyle:{"padding-bottom":"100px"}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{gutter:30}},t._l(t.productList,(function(e,r){return a("el-col",{key:r,staticStyle:{"margin-bottom":"30px","text-align":"center"},attrs:{xs:24,sm:12,md:12,lg:8,xl:6}},[a("el-card",{staticClass:"card-item",attrs:{"body-style":{padding:"20px"},shadow:"always"}},[a("el-row",{attrs:{type:"flex",gutter:10,justify:"space-between"}},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[a("el-link",{staticStyle:{"font-weight":"bold","font-size":"16px","line-height":"32px","white-space":"nowrap"},attrs:{type:"",underline:!1},on:{click:function(i){return t.handleEditProduct(e)}}},[a("svg-icon",{attrs:{"icon-class":"product"}}),t._v(" "+t._s(e.productName)+" "),1==e.isSys?a("el-tag",{staticStyle:{"margin-left":"5px","font-weight":"200"},attrs:{type:"info",size:"mini"}},[t._v("系统")]):t._e()],1)],1),a("el-col",{attrs:{span:4}},[2==e.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消发布",placement:"top-start"}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{type:"success",size:"mini"},on:{click:function(i){return t.changeProductStatus(e.productId,1)}}},[t._v("已发布")])],1):t._e(),1==e.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"现在发布",placement:"top-start"}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{type:"info",size:"mini"},on:{click:function(i){return t.changeProductStatus(e.productId,2)}}},[t._v("未发布")])],1):t._e()],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:14}},[a("el-descriptions",{staticStyle:{"margin-top":"10px","white-space":"nowrap"},attrs:{column:1,size:"small"}},[a("el-descriptions-item",{attrs:{label:"所属分类"}},[a("el-link",{attrs:{type:"primary",underline:!1}},[t._v(t._s(e.categoryName))])],1),a("el-descriptions-item",{attrs:{label:"产品类型"}},[a("dict-tag",{attrs:{options:t.dict.type.iot_device_type,value:e.deviceType}})],1),a("el-descriptions-item",{attrs:{label:"联网方式"}},[a("dict-tag",{attrs:{options:t.dict.type.iot_network_method,value:e.networkMethod}})],1),a("el-descriptions-item",{attrs:{label:"设备授权"}},[1==e.isAuthorize?a("el-tag",{attrs:{type:"success",size:"mini"}},[t._v("已启用")]):a("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("未启用")])],1)],1)],1),a("el-col",{attrs:{span:10}},[a("div",{staticStyle:{"margin-top":"10px"}},[null!=e.imgUrl&&""!=e.imgUrl?a("el-image",{staticStyle:{width:"100%",height:"100px","border-radius":"10px"},attrs:{lazy:"","preview-src-list":[t.baseUrl+e.imgUrl],src:t.baseUrl+e.imgUrl,fit:"cover"}}):a("el-image",{staticStyle:{width:"100%",height:"100px","border-radius":"10px"},attrs:{"preview-src-list":[i("32d1")],src:i("32d1"),fit:"cover"}})],1)])],1),a("el-button-group",{staticStyle:{"margin-top":"15px",height:"28px"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:product:edit"],expression:"['iot:product:edit']"}],attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return t.handleEditProduct(e)}}},[t._v("详情")]),1==e.status?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:product:remove"],expression:"['iot:product:remove']"}],attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(i){return t.handleDelete(e)}}},[t._v("删除")]):t._e(),2==e.status?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:product:edit"],expression:"['iot:product:edit']"}],attrs:{size:"mini",type:"success",icon:"el-icon-s-check",disabled:1!=e.isAuthorize},on:{click:function(i){return t.handleDeviceAuthorize(e)}}},[t._v("设备授权")]):t._e(),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:device:query"],expression:"['iot:device:query']"}],attrs:{size:"mini",type:"warning",icon:"el-icon-search"},on:{click:function(i){return t.handleViewDevice(e.productId)}}},[t._v("查看设备")])],1)],1)],1)})),1),0==t.total?a("el-empty",{attrs:{description:"暂无数据，请添加产品"}}):t._e(),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize,pageSizes:[12,24,36,60]},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{title:t.title,visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[a("el-link",{staticStyle:{"padding-left":"10px"},attrs:{type:"danger",underline:!1}},[t._v("该功能暂未实现，参考教程和项目的SDK示例")]),a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"设备类型"}},[a("el-radio-group",{model:{value:t.form.datatype,callback:function(e){t.$set(t.form,"datatype",e)},expression:"form.datatype"}},t._l(t.dict.type.iot_device_chip,(function(e){return a("el-radio",{key:e.value,staticStyle:{"margin-top":"15px",width:"160px"},attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:""},on:{click:t.downloadSdk}},[t._v("下 载")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)],1)},r=[],n=(i("a9e3"),i("9b9c")),o={name:"Product",dicts:["iot_yes_no","iot_product_status","iot_device_type","iot_network_method","iot_vertificate_method","iot_device_chip"],data:function(){return{loading:!0,total:0,productList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:12,productName:null,categoryId:null,categoryName:null,tenantId:null,tenantName:null,isSys:null,status:null,deviceType:null,networkMethod:null},form:{},baseUrl:"/prod-api"}},created:function(){this.getList()},activated:function(){var t=this.$route.query.t;null!=t&&t!=this.uniqueId&&(this.uniqueId=t,this.queryParams.pageNum=Number(this.$route.query.pageNum),this.getList())},methods:{getList:function(){var t=this;this.loading=!0,Object(n["e"])(this.queryParams).then((function(e){t.productList=e.rows,t.total=e.total,t.loading=!1}))},changeProductStatus:function(t,e){var i=this,a="发生错误了";2==e?a="产品发布后不能再更改产品内容和对应物模型 ！":1==e&&(a="产品下不能有已经创建的设备，才能取消发布哦 ！"),this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};a.productId=t,a.status=e,Object(n["b"])(a).then((function(t){i.getList(),i.$modal.alertSuccess(t.msg)})).catch((function(){}))})).catch((function(){}))},handleViewDevice:function(t){this.$router.push({path:"/iot/device",query:{t:Date.now(),productId:t}})},cancel:function(){this.open=!1,this.reset()},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleGeneratorSDK:function(t){this.title="生成SDK",this.open=!0},downloadSdk:function(){this.$download.zip("/iot/tool/genSdk?deviceChip=1","wumeismart-sdk")},handleDelete:function(t){var e=this,i=t.productId||this.ids,a="";this.$modal.confirm('是否确认删除产品编号为"'+i+'"的数据项？').then((function(){return Object(n["c"])(i).then((function(t){a=t.msg}))})).then((function(){e.getList(),e.$modal.msgSuccess(a)})).catch((function(){}))},handleEditProduct:function(t){var e=0;0!=t&&(e=t.productId||this.ids),this.$router.push({path:"/iot/product-edit",query:{productId:e,pageNum:this.queryParams.pageNum}})},handleDeviceAuthorize:function(t){var e=t.productId;this.$router.push({path:"/iot/product-edit",query:{productId:e,tabPanelName:"productAuthorize",pageNum:this.queryParams.pageNum}})}}},s=o,c=(i("51cc"),i("2877")),l=Object(c["a"])(s,a,r,!1,null,"da61f562",null);e["default"]=l.exports},"9b9c":function(t,e,i){"use strict";i.d(e,"e",(function(){return r})),i.d(e,"f",(function(){return n})),i.d(e,"d",(function(){return o})),i.d(e,"a",(function(){return s})),i.d(e,"g",(function(){return c})),i.d(e,"b",(function(){return l})),i.d(e,"c",(function(){return u}));var a=i("b775");function r(t){return Object(a["a"])({url:"/iot/product/list",method:"get",params:t})}function n(){return Object(a["a"])({url:"/iot/product/shortList",method:"get"})}function o(t){return Object(a["a"])({url:"/iot/product/"+t,method:"get"})}function s(t){return Object(a["a"])({url:"/iot/product",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/iot/product",method:"put",data:t})}function l(t){return Object(a["a"])({url:"/iot/product/status/",method:"put",data:t})}function u(t){return Object(a["a"])({url:"/iot/product/"+t,method:"delete"})}}}]);