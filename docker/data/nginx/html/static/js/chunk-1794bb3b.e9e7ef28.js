(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1794bb3b"],{"16f0":function(t,e,i){"use strict";i("8f479")},"8f479":function(t,e,i){},dd7b:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticStyle:{padding:"20px"}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{xs:24,sm:24,md:14,lg:14,xl:14}},[i("div",{staticClass:"login-top hidden-sm-and-down"},[i("h1",[i("a",{attrs:{href:"https://wumei.live/",target:"_blank"}},[t._v("FastBee物联网平台")])]),i("h2",[i("a",{attrs:{href:"https://wumei.live/",target:"_blank"}},[t._v("FastBee")]),t._v(" open source living iot platform")]),i("div",{staticStyle:{"max-width":"330px","text-align":"left",margin:"0 auto"}},[t.bindAccount?t._e():i("div",{staticStyle:{padding:"25px 0"}},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v("登录方式")]),i("el-button",{staticStyle:{border:"1px solid #fff"},attrs:{type:"success",title:"微信登录",size:"mini",disabled:""},on:{click:t.authLogin}},[i("svg-icon",{attrs:{"icon-class":"wechat"}}),t._v(" 微信 ")],1),i("el-button",{staticStyle:{border:"1px solid #fff"},attrs:{type:"danger",title:"QQ登录",size:"mini",disabled:""},on:{click:t.qqLogin}},[i("svg-icon",{attrs:{"icon-class":"qq"}}),t._v(" QQ ")],1),i("el-button",{staticStyle:{border:"1px solid #fff"},attrs:{type:"primary",title:"支付宝登录",size:"mini",disabled:""},on:{click:t.authLogin}},[i("svg-icon",{attrs:{"icon-class":"zhifubao"}}),t._v(" 支付宝 ")],1)],1),t.register?i("div",[i("el-button",{staticStyle:{padding:"0px"},attrs:{type:"warning"}},[i("el-link",{staticStyle:{color:"#fff",padding:"12px 18px"},attrs:{href:"https://wumei.live/",underline:!1,target:"_blank"}},[t._v("返回官网")])],1),i("el-button",{staticStyle:{padding:"0px"},attrs:{type:"success"}},[i("el-link",{staticStyle:{color:"#fff",padding:"12px 18px"},attrs:{href:"https://wumei.live/doc",underline:!1,target:"_blank"}},[t._v("查看文档")])],1),i("el-button",{staticStyle:{padding:"0px"}},[i("router-link",{staticStyle:{color:"#666",padding:"11px 18px",display:"flex","padding-bottom":"12px"},attrs:{to:{path:"/register",query:this.$route.query}}},[t._v("注册账号 ")])],1)],1):t._e(),i("div",{staticStyle:{"line-height":"20px",border:"1px solid #fff",color:"#eee","margin-top":"30px",width:"316px"}},[i("table",[i("tr",[i("td",{staticStyle:{width:"60px","font-weight":"bold",color:"#fff","line-height":"28px","background-color":"#F56C6C","text-align":"center","font-size":"18px"},attrs:{rowspan:"3"}},[t._v("演 示"),i("br"),t._v("账 号")]),i("td",{staticStyle:{padding:"10px 15px 0 10px"}},[t._v("受限管理")]),i("td",{staticStyle:{padding:"10px 30px 0 0"}},[t._v("wumei")]),i("td",{staticStyle:{"padding-top":"10px"}},[t._v("123456")])]),i("tr",[i("td",{staticStyle:{padding:"0 15px 0 10px"}},[t._v("租户账号")]),i("td",[t._v("wumei-t1")]),i("td",[t._v("123456")])]),i("tr",[i("td",{staticStyle:{padding:"0 15px 10px 10px"}},[t._v("普通用户")]),i("td",{staticStyle:{"padding-bottom":"10px"}},[t._v("wumei-u1")]),i("td",{staticStyle:{"padding-bottom":"10px"}},[t._v("123456")])])])])])])]),i("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[i("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules}},[t.bindAccount?i("h3",{staticClass:"bindAccountTitle"},[t._v("绑定蜂信科技账户")]):i("h3",{staticClass:"title"},[t._v("账号登录")]),i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}},[i("svg-icon",{staticClass:"input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}},[i("svg-icon",{staticClass:"input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),t.captchaOnOff?i("el-form-item",{attrs:{prop:"code"}},[i("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}},[i("svg-icon",{staticClass:"input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),i("div",{staticClass:"login-code"},[i("img",{attrs:{src:t.codeUrl},on:{click:t.getCode}})])],1):t._e(),i("el-checkbox",{staticStyle:{margin:"0px 0px 25px 0px",color:"#000"},model:{value:t.loginForm.rememberMe,callback:function(e){t.$set(t.loginForm,"rememberMe",e)},expression:"loginForm.rememberMe"}},[t._v("记住密码")]),i("el-form-item",{staticStyle:{width:"100%"}},[t.bindAccount?i("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t.loading?i("span",[t._v("绑 定 中...")]):i("span",[t._v("绑定")])]):i("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t.loading?i("span",[t._v("登 录 中...")]):i("span",[t._v("登 录")])])],1)],1)],1)],1)],1),t._m(0)])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-login-footer"},[i("span",[t._v("Copyright © 2021-2024 "),i("a",{attrs:{target:"_blank",href:"https://fastbee.cn/"}},[t._v("蜂信物联")]),t._v(" All Rights Reserved.")])])}],r=(i("e05f"),i("7ded")),a=i("852e"),s=i.n(a),l=i("24e5"),c=i.n(l),d="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH\nnzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==",u="MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY\n7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN\nPuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA\nkM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow\ncSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv\nDQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh\nYhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3\nUP8iWi1Qw0Y=";function p(t){var e=new c.a;return e.setPublicKey(d),e.encrypt(t)}function g(t){var e=new c.a;return e.setPrivateKey(u),e.decrypt(t)}var f={name:"Login",data:function(){return{codeUrl:"",loginForm:{username:"",password:"",rememberMe:!1,code:"",uuid:"",bindId:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入您的账号"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},loading:!1,captchaOnOff:!0,bindAccount:!1,register:!0,redirect:void 0}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},created:function(){var t=this.$route.query.loginId;void 0===t||null===t?(this.checkBind(),this.checkErrorMsg(),this.getCode(),this.getCookie()):this.redirectLogin(t)},methods:{redirectLogin:function(t){var e=this;this.loading=!0,this.$store.dispatch("RedirectLogin",t).then((function(){e.$router.push({path:e.redirect||"/"}).catch((function(){}))})).catch((function(){e.loading=!1,e.captchaOnOff&&e.getCode(),e.$router.push({query:{}})}))},checkBind:function(){var t=this,e=this.$route.query,i=e.bindId;void 0===i||null===i?this.bindAccount=!1:(this.bindAccount=!0,Object(r["c"])(i).then((function(e){t.bindAccount=void 0===e.bindAccount||e.bindAccount,t.bindAccount?t.loginForm.bindId=i:(t.loginForm.bindId="",t.$router.push({query:{}}))})))},checkErrorMsg:function(){var t=this,e=this.$route.query.errorId;void 0!==e&&null!==e&&Object(r["e"])(e).then((function(t){})).catch((function(e){t.$router.push({query:{}})}))},getCode:function(){var t=this;Object(r["d"])().then((function(e){t.captchaOnOff=void 0===e.captchaOnOff||e.captchaOnOff,t.captchaOnOff&&(t.codeUrl="data:image/gif;base64,"+e.img,t.loginForm.uuid=e.uuid)}))},getCookie:function(){var t=s.a.get("username"),e=s.a.get("password"),i=s.a.get("rememberMe");this.loginForm={username:void 0===t?this.loginForm.username:t,password:void 0===e?this.loginForm.password:g(e),rememberMe:void 0!==i&&Boolean(i)}},qqLogin:function(){window.location.href="http://localhost:8080/auth/render/qq"},authLogin:function(){var t=this;this.$alert("第三方登录正在集成中...","提示消息",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}})},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){e&&(t.loading=!0,t.loginForm.rememberMe?(s.a.set("username",t.loginForm.username,{expires:30}),s.a.set("password",p(t.loginForm.password),{expires:30}),s.a.set("rememberMe",t.loginForm.rememberMe,{expires:30})):(s.a.remove("username"),s.a.remove("password"),s.a.remove("rememberMe")),console.log(t.loginForm),t.$store.dispatch("Login",t.loginForm).then((function(){t.$router.push({path:t.redirect||"/"}).catch((function(){}))})).catch((function(){t.loading=!1,t.captchaOnOff&&t.getCode()})))}))}}},m=f,h=(i("16f0"),i("2877")),v=Object(h["a"])(m,n,o,!1,null,null,null);e["default"]=v.exports}}]);